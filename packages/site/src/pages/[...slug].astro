---
import { metadata } from '@packages/data';
import {
  kIndex,
  kWhyItMatters,
  kHowItWorks,
  kOurRole,
  kOurPosition,
  kByCountry,
} from '@packages/data/constants';

import Layout from '../layouts/BaseLayout.astro';
import MainHomepage from '../components/MainHomepage.astro';
import MainFAQs from '../components/MainFAQs.astro';
import MainContent from '../components/MainContent.astro';
import MainByCountry from '../components/MainByCountry.astro';
import Main404 from '../components/Main404.astro';

interface Props {
  lang: string;
  currentPage: string;
  currentFAQ: string | null;
}

const { lang, currentPage, currentFAQ } = Astro.props;

const { backToTop } = metadata(lang);

const props = { lang, currentPage, currentFAQ };

export { getStaticPaths } from '../js/utils.js';

const selectPage = () => {
  switch (currentPage) {
    case kIndex:
      return MainHomepage;

    case kByCountry:
      return MainByCountry;

    case kWhyItMatters:
    case kOurPosition:
      return MainContent;

    case kOurRole:
    case kHowItWorks:
      return MainFAQs;

    default:
      return Main404;
  }
};

const Page = selectPage();
---

<Layout {...props}>
  <Page {...props} />
</Layout>
