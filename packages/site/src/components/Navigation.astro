---
import { pageLabels } from '@packages/data';

interface Props {
  lang: string;
  currentPage: string;
}

const { lang, currentPage } = Astro.props;
---

<!-- When we are on mobile device view, the header needs a role="presentation" that Fernando asked to add --><!-- <header class="min-h-[72px] shadow-md" role="presentation"> -->
<header class="min-h-[72px] shadow-md pl-1 pr-1" id="header">
  <div
    class="lg:max-w-6xl lg:mx-auto relative flex flex-wrap items-center justify-between py-2">
    <div class="logo flex-1 mx-2 sm:mx-0 my-2">
      <a href="#">
        <img
          src="/assets/img/logos/logo-ep-en.svg"
          alt="European Parliament logo"
          class="w-full max-w-[150px] h-[40px]"
        />
      </a>
    </div>
    <div class="flex items-center ml-auto justify-end pb-0">
      <div class="desktop-menu flex justify-end">
        <nav role="navigation" aria-label="Main menu" class="default-menu">
          <div class="desktop-menu-display">
            <ul class="navList lg:mr-1">
              {
                pageLabels(lang).map(({ key, label }) => (
                  <li class={currentPage === key ? 'current' : ''}>
                    <a
                      aria-current={currentPage === key}
                      href={`/${lang}/${key}/`}>
                      {label}
                    </a>
                  </li>
                ))
              }
            </ul>
          </div>
        </nav>
      </div>

      {/* Mobile menu */}
      <div class="mobile-menu flex justify-end">
        {/* JS interacts with these elements */}
        <div
          id="navWrapper"
          class="navWrapper"
          role="navigation"
          aria-label="Main navigation">
          <div class="divNavigation" id="divNavigation">
            <div id="divBack" class="divBack">
              {/* Back button added dynamically by JS */}
            </div>
            <div id="divMenuTitle" class="divMenuTitle" aria-hidden="true">
              {/* Title added dynamically by JS */}
            </div>
            <div id="divmainMenuButton" class="divmainMenuButton">
              {/* Main menu button potentially replaced by JS */}
              <a
                id="mainMenuButton"
                data-expanded="false"
                role="button"
                href="#"
                aria-label="Open main navigation menu (opens in a dialog)">
                <span class="mr-3">Menu</span>
                <svg
                  class="inline-block w-[15px] h-[9px]"
                  viewBox="0 0 21.741 12.602"
                  aria-hidden="true"
                  focusable="false">
                  <path
                    id="Arrow"
                    d="M0,.055,9.8,9.442,14.545,4.9,19.666,0"
                    transform="translate(1.037 1.083)"
                    fill="none"
                    stroke="#024ea2"
                    stroke-width="3"></path>
                </svg>
              </a>
            </div>
          </div>

          <ul
            id="mainList"
            class="main-menu flex flex-wrap items-center mx-3 my-2 none">
            {/* Mobile menu items - JS handles visibility and interactions */}
            <li class="level1 main">
              {/* Current state handled by JS */}
              <a href="homepage.html">Homepage</a>
            </li>
            <li class="level1 main">
              <a href="why-it-matters.html">Why it matters</a>
            </li>
            <li class="level1 main">
              <a href="how-it-works.html">How it works</a>
            </li>
            <li class="level1 main"><a href="our-role.html">Our Role</a></li>
            <li class="level1 main">
              <a href="our-position.html">Our Position</a>
            </li>
            <li class="level1 main">
              <a href="by-country.html">By country</a>
            </li>
          </ul>
        </div>
      </div>

      {/* Lang menu dropdown */}
      <nav
        role="navigation"
        aria-label="language menu"
        class="lang-nav flex justify-end">
        <div class="expand-collapse border-[LightGray] border-1 rounded-lg">
          {/* This class name might be generic, ensure JS targets correctly */}
          <button
            id="lang-menu"
            class="nav-button flex items-center rounded-md border border-1 border-solid border-black-greymiddle focus:outline focus:outline-2 focus:outline-blue-focus px-2.5 py-1 mr-4"
            aria-expanded="false"
            data-button
            data-controls="lang-list"
            aria-controls="lang-list">
            <span class="inline-block text-base pt-0.5 mr-3">
              EN <span class="sr-only">- English</span>
            </span>
            <svg
              class="inline-block w-[15px] h-[9px]"
              viewBox="0 0 21.741 12.602"
              aria-hidden="true"
              focusable="false">
              <path
                id="Arrow"
                d="M0,.055,9.8,9.442,14.545,4.9,19.666,0"
                transform="translate(1.037 1.083)"
                fill="none"
                stroke="#024ea2"
                stroke-width="3"></path>
            </svg>
          </button>
        </div>
      </nav>
    </div>

    {/* Desktop content - controlled by menu-desktop.js */}

    {/* Lang content - controlled by menu-desktop.js */}
    <div
      id="lang-list"
      class="submenu-content hidden"
      data-content
      aria-labelledby="lang-menu">
      <ul class="lang-content block px-6 mx-auto max-w-[1100px]">
        <li><a lang="bg" hreflang="bg" href="../bg/">BG - Български</a></li>
        <li><a lang="es" hreflang="es" href="../es/">ES - Español</a></li>
        <li><a lang="cs" hreflang="cs" href="../cs/">CS - Čeština</a></li>
        <li><a lang="da" hreflang="da" href="../da/">DA - Dansk</a></li>
        <li><a lang="de" hreflang="de" href="../de/">DE - Deutsch</a></li>
        <li>
          <a lang="et" hreflang="et" href="../et/">ET - Eesti keel</a>
        </li>
        <li><a lang="el" hreflang="el" href="../el/">EL - Ελληνικά</a></li>
        <li>
          <a
            lang="en"
            hreflang="en"
            href="../en/"
            class="current"
            aria-current="true">EN - English</a
          >
        </li>
        <li><a lang="fr" hreflang="fr" href="../fr/">FR - Français</a></li>
        <li><a lang="ga" hreflang="ga" href="../ga/">GA - Gaeilge</a></li>
        <li><a lang="hr" hreflang="hr" href="../hr/">HR - Hrvatski</a></li>
        <li><a lang="it" hreflang="it" href="../it/">IT - Italiano</a></li>
        <li>
          <a lang="lv" hreflang="lv" href="../lv/">LV - Latviešu valoda</a>
        </li>
        <li>
          <a lang="lt" hreflang="lt" href="../lt/">LT - Lietuvių kalba</a>
        </li>
        <li><a lang="hu" hreflang="hu" href="../hu/">HU - Magyar</a></li>
        <li><a lang="mt" hreflang="mt" href="../mt/">MT - Malti</a></li>
        <li>
          <a lang="nl" hreflang="nl" href="../nl/">NL - Nederlands</a>
        </li>
        <li><a lang="pl" hreflang="pl" href="../pl/">PL - Polski</a></li>
        <li><a lang="pt" hreflang="pt" href="../pt/">PT - Português</a></li>
        <li><a lang="ro" hreflang="ro" href="../ro/">RO - Română</a></li>
        <li>
          <a lang="sk" hreflang="sk" href="../sk/">SK - Slovenčina</a>
        </li>
        <li>
          <a lang="sl" hreflang="sl" href="../sl/">SL - Slovenščina</a>
        </li>
        <li><a lang="fi" hreflang="fi" href="../fi/">FI - Suomi</a></li>
        <li><a lang="sv" hreflang="sv" href="../sv/">SV - Svenska</a></li>
      </ul>
    </div>
  </div>
</header>
